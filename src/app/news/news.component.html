<div class="container-fluid mt-4">
  <div class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-header bg-info text-white">
          <h4 class="mb-0">
            <i class="fas fa-newspaper"></i> Market News
            <span class="badge badge-light ml-2">{{ filteredNews.length }} articles</span>
          </h4>
        </div>
        
        <div class="card-body">
          <!-- Search and Filter Controls -->
          <div class="row mb-4">
            <div class="col-md-6">
              <div class="input-group">
                <input 
                  type="text" 
                  class="form-control" 
                  placeholder="Search news..."
                  [(ngModel)]="searchTerm"
                  (keyup)="onSearchChange()"
                />
                <div class="input-group-append">
                  <span class="input-group-text">
                    <i class="fas fa-search"></i>
                  </span>
                </div>
              </div>
            </div>
            
            <div class="col-md-4">
              <select class="form-control" [(ngModel)]="selectedCategory" (change)="onCategoryChange()">
                <option value="all">All Categories</option>
                <option value="market">Market News</option>
                <option value="stock">Stock Specific</option>
                <option value="economy">Economy</option>
                <option value="general">General</option>
              </select>
            </div>
            
            <div class="col-md-2 text-right">
              <button class="btn btn-primary" (click)="refreshNews()">
                <i class="fas fa-sync-alt"></i> Refresh
              </button>
            </div>
          </div>

          <!-- Loading State -->
          <div *ngIf="isLoading" class="text-center my-5">
            <div class="spinner-border text-primary" role="status">
              <span class="sr-only">Loading...</span>
            </div>
            <p class="mt-2">Loading news...</p>
          </div>

          <!-- Empty State -->
          <div *ngIf="!isLoading && filteredNews.length === 0" class="text-center my-5">
            <i class="fas fa-newspaper fa-3x text-muted mb-3"></i>
            <h5>No news found</h5>
            <p class="text-muted">Try adjusting your filters or refresh to load news</p>
          </div>

          <!-- News List -->
          <div *ngIf="!isLoading && filteredNews.length > 0" class="news-container">
            <div *ngFor="let article of filteredNews" class="news-card card mb-3">
              <div class="row no-gutters">
                <div class="col-md-3" *ngIf="article.urlToImage">
                  <img 
                    [src]="article.urlToImage" 
                    [alt]="article.title"
                    class="news-image"
                    (error)="$event.target.src = getDefaultImage()"
                  />
                </div>
                <div [class.col-md-9]="article.urlToImage" [class.col-md-12]="!article.urlToImage">
                  <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start mb-2">
                      <span class="badge badge-primary">{{ article.source.name }}</span>
                      <small class="text-muted">{{ getTimeAgo(article.publishedAt) }}</small>
                    </div>
                    
                    <h5 class="card-title">
                      <a href="javascript:void(0)" (click)="openArticle(article.url)" class="news-link">
                        {{ article.title }}
                      </a>
                    </h5>
                    
                    <p class="card-text" *ngIf="article.description">
                      {{ article.description }}
                    </p>
                    
                    <div class="d-flex justify-content-between align-items-center">
                      <small class="text-muted" *ngIf="article.author">
                        <i class="fas fa-user"></i> {{ article.author }}
                      </small>
                      <button class="btn btn-sm btn-outline-primary" (click)="openArticle(article.url)">
                        Read More <i class="fas fa-external-link-alt"></i>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Info Alert -->
          <div class="alert alert-info mt-4">
            <i class="fas fa-info-circle"></i>
            <strong>Note:</strong> News data is fetched from various sources and updated periodically. 
            Click "Refresh" to get the latest news.
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
